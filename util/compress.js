const sharp=require("sharp");function compress(e,t,r,s,a){let o=t?"webp":"jpeg";return sharp(e).grayscale(r).toFormat(o,{quality:s,progressive:!0,optimizeScans:!0}).toBuffer({resolveWithObject:!0}).then(({data:e,info:t})=>({err:null,headers:{"content-type":`image/${o}`,"content-length":t.size,"x-original-size":a,"x-bytes-saved":a-t.size},output:e})).catch(e=>({err:e}))}module.exports=compress;
